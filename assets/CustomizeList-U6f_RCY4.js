import{_ as D,g as f,m as w,c as l,a as t,f as i,t as r,F as h,h as m,b as _,o as a,r as x}from"./index-CANkekuL.js";import{a as g,u as z}from"./component-functions-B3Lc5BsT.js";import{D as M}from"./DoubleCheckModal-Pkm6qwJL.js";import{C as N}from"./CustomizeBaseDataModal-BaOFckuh.js";import"./selector-engine-BAtv4zJi.js";const A={data(){return{updateSortData:[],organicAcid:[]}},watch:{customizeModal:{handler(e){e.switch===!1&&location.reload()},deep:!0,immediate:!0},customizeDataList:{handler(){this.sortItem()},deep:!0,immediate:!0}},components:{DoubleCheckModal:M,CustomizeBaseDataModal:N},computed:{...f(g,["customizeDataList","filteredCustomizeDataList","customizeData","customizeModal","myAddedNtsList"]),...f(z,["headerChineseAndEnglish"]),noResultText(){return this.customizeDataList.length===0&&this.filteredCustomizeDataList.length===0?"目前無自定義的資料～":this.customizeDataList.length===0&&this.filteredCustomizeDataList.length>0?"搜尋結果：無符合的資料～":""}},methods:{...w(g,["editCustomizeData","delItemOfCustomizeList"]),sortItem(){this.updateSortData=this.customizeDataList,this.updateSortData.sort((e,s)=>s.id-e.id)},transUnitText(e){const s={kcal:"大卡",g:"公克",ug:"微克",mg:"毫克",IU:"國際單位"},c=e.match(/\((kcal|g|ug|mg|IU)\)/);return c===null?"":s[c[1]]},opendelModal(e,s){this.$refs.doubleCheckModal.showDelCustomizeModal(e,s)},isPath(e){return this.$route.path=`/edit_customize/${e}`},openModal(e){this.$refs.customizeBaseDataModal.showModal(),e&&this.editCustomizeData(e)},getOrganicAcidName(){var s;const e=[];(s=this.myAddedNtsList)==null||s.forEach(c=>{c.type==="有機酸"&&e.push(c.enName)}),this.organicAcid=e},isOtherIngredients(e){var c;let s=!1;return(c=e.newClaimNts)==null||c.forEach(b=>{this.organicAcid.includes(b)?s=!0:s=!1}),!!(e.baseClaimNts&&Object.keys(e.baseClaimNts).includes("alcohol")||s===!0)}},created(){this.sortItem(),this.getOrganicAcidName()}},L={class:"mx-auto col-11 col-lg-10 pb-5 mb-5"},S={class:"text-end mb-3"},I={key:0,class:"mx-auto py-5 col-12 w-100 text-center"},v={class:"text-center fw-bold fs-5 text-primary"},B={class:"p-3 col"},O={class:"d-flex"},E={class:"mb-0"},T={class:"d-flex"},U={class:"mb-0"},j={class:"col-12 col-sm-7 col-md-5 col-lg-5 col-xl-4 col-xxl-3 d-flex flex-wrap justify-content-end p-3"},F={class:"table table-sm table-borderless border border-2 border-black col-12 mb-1"},V={class:"lh-1"},q={class:"text-end px-2"},R={class:"lh-1"},P={class:"text-end px-2"},G={class:"lh-1"},H={class:"text-end px-2"},J={class:"lh-1"},K={class:"text-end px-2"},Q={class:"lh-1"},W={class:"text-end px-2"},X={class:"lh-1"},Y={class:"text-end px-2"},Z={class:"lh-1"},$={class:"text-end px-2"},tt={class:"lh-1"},st={class:"text-end px-2"},et={key:0,class:"px-2 fw-normal"},ot={key:1,class:"text-end px-2"},lt={key:0,class:"px-2 fw-normal"},at={key:1,class:"text-end px-2"},rt={key:0,class:"table table-sm table-borderless border border-2 border-black col-12"},nt={key:0,class:"fw-normal ps-2"},dt={key:1,class:"text-end pe-2 align-middle"},it={key:0,class:"fw-normal ps-2"},ct={key:1,class:"text-end pe-2"},ut={class:"text-end my-3"},ht=["onClick"],mt=["onClick"];function pt(e,s,c,b,p,u){const C=x("DoubleCheckModal"),y=x("CustomizeBaseDataModal");return a(),l("div",L,[t("header",S,[s[2]||(s[2]=t("h3",{class:"text-center"},"自定義資料庫",-1)),p.updateSortData.length>0?(a(),l("button",{key:0,onClick:s[0]||(s[0]=(...o)=>u.openModal&&u.openModal(...o)),class:"btn btn-primary"}," 新增 ")):i("",!0)]),p.updateSortData.length===0?(a(),l("section",I,[s[3]||(s[3]=t("i",{class:"bi bi-clipboard text-secondary"},null,-1)),t("p",v,r(u.noResultText),1),t("button",{onClick:s[1]||(s[1]=(...o)=>u.openModal&&u.openModal(...o)),class:"btn btn-primary"}," 試著新增一個吧！ ")])):i("",!0),(a(!0),l(h,null,m(p.updateSortData,(o,k)=>(a(),l("section",{key:o,class:"bg-light border rounded row m-0 mb-5 justify-content-between"},[t("section",B,[t("div",O,[s[4]||(s[4]=t("p",{class:"mb-0"},"品名",-1)),s[5]||(s[5]=t("i",{class:"fst-normal"},"：",-1)),t("p",E,r(o.sample_name),1)]),t("div",T,[s[6]||(s[6]=t("p",{class:"mb-0"},"成分",-1)),s[7]||(s[7]=t("i",{class:"fst-normal"},"：",-1)),t("p",U,r(o.content_description),1)])]),t("section",j,[t("table",F,[s[17]||(s[17]=t("thead",null,[t("tr",{class:"lh-sm"},[t("th",{colspan:"2",class:"text-center fw-normal border-bottom border-black"}," 營養標示 ")])],-1)),t("tbody",null,[s[16]||(s[16]=t("tr",{class:"lh-sm"},[t("th",{class:"border-bottom border-black"}),t("td",{class:"text-end px-2 border-bottom border-black"}," 每 100 公克 / 毫升 ")],-1)),t("tr",V,[s[8]||(s[8]=t("th",{class:"px-2 fw-normal"},"熱量",-1)),t("td",q,r(o.calories)+" 大卡",1)]),t("tr",R,[s[9]||(s[9]=t("th",{class:"px-2 fw-normal"},"蛋白質",-1)),t("td",P,r(o.protein)+" 公克",1)]),t("tr",G,[s[10]||(s[10]=t("th",{class:"px-2 fw-normal"},"脂肪",-1)),t("td",H,r(o.fat)+" 公克",1)]),t("tr",J,[s[11]||(s[11]=t("th",{class:"pe-2 ps-4 fw-normal"},"飽和脂肪",-1)),t("td",K,r(o.saturated_fat)+" 公克",1)]),t("tr",Q,[s[12]||(s[12]=t("th",{class:"pe-2 ps-4 fw-normal"},"反式脂肪",-1)),t("td",W,r(o.trans_fat/1e3)+" 公克",1)]),t("tr",X,[s[13]||(s[13]=t("th",{class:"px-2 fw-normal"},"碳水化合物",-1)),t("td",Y,r(o.total_carbohydrates)+" 公克",1)]),t("tr",Z,[s[14]||(s[14]=t("th",{class:"pe-2 ps-4 fw-normal"},"糖",-1)),t("td",$,r(o.total_sugar)+" 公克",1)]),t("tr",tt,[s[15]||(s[15]=t("th",{class:"px-2 fw-normal"},"鈉",-1)),t("td",st,r(o.sodium)+" 毫克",1)]),(a(!0),l(h,null,m(o.baseClaimNts,(n,d)=>(a(),l("tr",{key:d,class:"lh-1"},[d!=="alcohol"?(a(),l("th",et,r(e.headerChineseAndEnglish[d].replace(/\(.*\)/,"")),1)):i("",!0),d!=="alcohol"?(a(),l("td",ot,r(n)+" "+r(u.transUnitText(e.headerChineseAndEnglish[d])),1)):i("",!0)]))),128)),(a(!0),l(h,null,m(o.newClaimNts,(n,d)=>(a(),l("tr",{key:n+d,class:"lh-1"},[n.type!=="有機酸"?(a(),l("th",lt,r(n.chName),1)):i("",!0),n.type!=="有機酸"?(a(),l("td",at,r(n.quantity)+" "+r(n.unit.replace(/\(.*\)/,"")),1)):i("",!0)]))),128))])]),u.isOtherIngredients(o)?(a(),l("table",rt,[s[18]||(s[18]=t("thead",null,[t("tr",{class:"lh-sm"},[t("th",{class:"ps-2 fw-normal border-bottom border-black align-middle col"}," 其他成分 "),t("td",{class:"text-end pe-2 border-bottom border-black col align-middle"}," 每 100 公克 / 毫升 ")])],-1)),t("tbody",null,[(a(!0),l(h,null,m(o.baseClaimNts,(n,d)=>(a(),l("tr",{key:d,class:"lh-1"},[d==="alcohol"?(a(),l("th",nt,"酒精")):i("",!0),d==="alcohol"?(a(),l("td",dt,r(n)+" 公克 ",1)):i("",!0)]))),128)),(a(!0),l(h,null,m(o.newClaimNts,n=>(a(),l("tr",{key:n,class:"lh-1"},[n.type==="有機酸"?(a(),l("th",it,r(n.chName),1)):i("",!0),n.type==="有機酸"?(a(),l("td",ct,r(n.quantity)+" "+r(n.unit.replace(/\(.*\)/,"")),1)):i("",!0)]))),128))])])):i("",!0)]),t("div",ut,[t("button",{onClick:n=>u.openModal(o),type:"button",class:"btn btn-outline-primary me-3"}," 編輯 ",8,ht),t("button",{onClick:n=>u.opendelModal(o,k),type:"button",class:"btn btn-outline-danger me-1"}," 刪除 ",8,mt)])]))),128)),_(C,{ref:"doubleCheckModal"},null,512),_(y,{ref:"customizeBaseDataModal"},null,512)])}const Ct=D(A,[["render",pt],["__scopeId","data-v-e760fee2"]]);export{Ct as default};
